<!DOCTYPE html>
<meta charset="utf8"/>
<script src=../js/config.js></script>
<script src=../js/essential.js></script>
<script src=../js/sha256.js></script>
<!--
  findprovs on editor_token
 
  load all texts under a labelled list from all online participants

 label -> token_label -> token_urn -> token_nid -> token_hash
 "fairnet" -> "I use fairnet" -> "uri:text:{label}" -> 35e0hagvp4p15 -> z83ajNoNw5p9R6fCe75mB3eqPw9NyPh2x
-->
<style>i { color: grey; }
#rankers_token_pin_img { height: 24px; }
</style>
<div class=content>
<h2>Median Sorted List from a Labeled Group<span id=listname></span></h2>
api url: <input name=api_url placeholder="api url" size="32" onchange="update_api_url(event)">
<br>repo: <span id=repo_path><i>:repo_path</i></span>
<br>peerid: <span id=peerid><i>:peerid</i></span>
<br>editor_token_nid: <span id=editor_token_nid><i>:editor_token_nid</i></span>
<br>editor_token_hash: <span id=editor_token_hash><i>:editor_token_hash</i></span>
<br>list_label: <input name=list_label placeholder="list-label, default to 'Fair List'" onchange="update_label(event)"> (defined a group of texts, default: "Fair List")
<br>list_token_label: <span id=list_token_label><i>:list_token_label</i></span>
<br>list_token_nid: <span id=list_token_nid><i>:list_token_nid</i></span>
<br>list_token_hash: <span id=list_token_hash><i>:list_token_hash</i></span>

<br><button onclick="node_create(event);">create a node</button>
<button title="set_token" onclick="notify(event);">notify</button> <i>(setToken for list)</i>
<br>list_log_hash: <span id=list_log_hash><i>:list_log_hash</i></span> (published log after submit)
<br>root_hash: <span id=root_hash><i>:root_hash</i></span> <button title="publish" onclick="publish(event);">publish</button>
<br>webui: <a target="_webui" class=webui href="webui:/#/files/public/logs/">/public/logs</a>

<div id=node style="display:none; border: 1px solid black; padding: 0.8rem">
<br>node's list: <input name=label value="" placeholder="list's label to attached the text" disabled>
<br>category: <input type=text name=category value='' placeholder="category">
<br>path: <input name=path value="/public/submission/proposal" placeholder="mutable path" required>*
<br>author: <input name=author value="anonymous" placeholder="author">
<br>stamp: <input name=ts value onmouseover="this.value=Date.now();" required>*
<br>title: <input title="this title charaterizes the text" type=text name=title value='' onchange="node_urn_update(event);" placeholder="title for your text" required>*
<br>date: <input type=date name=date value='' placeholder="date">
<script>
 document.getElementsByName('date')[0].valueAsDate = new Date();
</script>
<br><textarea name=node_text rows=5 cols=80 required></textarea>
<br><button onclick="node_submit(event);">submit</button>
<button onclick="publish_and_notify(event);">publish and notify</button>
<button onclick="node_close(event);">close</button>
</div>

<br><button id=providers-button onclick="find_peers(event);">find peers on DHT</button>
<br>discovery: search for token_hash: <span id=searched_token_hash><i>:searched_token_hash</i></span>
<br>providers <span id=providers_status></span>:
<div id=peerids></div>
<br><button id=list-button onclick="get_node_list(event);">get node list</button>
<span id=list_status></span>
<br>history_lock: <span id=history_lock_status>?</span>
<a id=history_link class="webui node_urn" target="_webui" href="webui:/#/files/public/logs/:node_urn-history.log"><i>:node_urn</i>-history.log</a>
<!-- br>qmhash: <input name=qminput placeholder="node-hash" onchange="update_qmhash_value(event);" size=43> (manual entry) -->
<br>qmhash:
<select name=qmhash onchange="update_qmhash(event);">
<option label="Please select a qmhash">Please select a hash</option>
<option value="QmbFMke1KXqnYyBBWxB74N4c5SBnJMVAiMNRcGu6x1AwQH">QMFMke...: no nodes found</option>
</select>
<br>node_hash: <span id=node_hash><i>:node_hash</i></span>
<br>node_urn: <input name=node_urn value=":node_urn" disabled>
<br>node_token: <input name=node_token_hash value=":node_token_hash" size=43 disabled>
<br>
<br><button id=rankers-button onclick="find_rankers(event);">find rankers on DHT</button>
<br>ipns: <span id=ipns_status><i>:status</i></span>
<br>rankers <span id=rankers_status></span>:
<div id=rankers></div>
<br>rankers_nid: <input name=rankers_nid value=":rankers_nid" disabled>
<br>rankers_token: <span id=rankers_token_hash><i>:rankers_token_hash</i></span><img id="rankers_token_pin_img"> <input type=checkbox name=rankers_token_pin onchange="update_rankers_token_pin(event)">

<hr>
<textarea id=selected_text cols=76 rows=5 disabled></textarea>

<br>survey: <span id=survey><i>:survey</i></span> <i>(median w/ score_db, all votes)</i>
<br>nb votes: <span id=nbv><i>:nbv</i></span>
<br><button onclick="survey_pull(event);" name="survey_pull">pull survey</button>
<br>median: <span id=median><i>:median</i></span> <i>(median w/ history_db)</i>
<br>nb pers: <span id=nbp><i>:nbp</i></span>
<br>score: <input type="number" name="score" min="0" max="20" value="12" onchange="update_value(event);">
<input type="range" name="value" min="0" max="20" onchange="display_score(event);" class="slider">
<br>score_lock: <span id=score_lock_status>?</span>
<br><button onclick="node_rank(event);">rank node</button>
<button onclick="publish_root(event);">sign</button>
<button onclick="history_pull(event);">pull history</button><span id=history_status></span>

<button onclick="dot_create(event);">create a dot</button>
<br>qmhash: <span id=qmhash><i>:qmhash</i></span> <i>(hash of voted node)</i>
<br>qmjson: <span id=qmjson><i>:qmjson</i></span> <i>(/public/logs/\*-state.json)</i>
<br>qmhistory: <span id=qmhistory><i>:qmhistory</i></span> <i>(/public/logs/\*-history.json)</i>
<br>qmresult: <span id=qmresult><i>:qmresult</i></span> <i>(/public/share/\*-result.json)</i>

</div>

<script src=../js/ipns_cache.js></script>
<script src=../js/api_config.js></script>
<script src=../js/ipfs.js></script>
<script src=../js/functions.js></script>
<script src=../js/BaseN.js></script>
<script src=../js/Base32.js></script>
<script src=node_list_create_n_rank.js></script>
<!-- vim: syntax=html
-->
